[{"title":"OkHttp的使用","date":"2017-01-04T02:13:16.000Z","path":"2017/01/04/OkHttp的使用/","text":"网络请求框架我一直都使用httpclient，后来改成了xutils，但是去年开始自从Android6.0去掉了httpclient的支持，想要使用还要在build.gradle添加useLibrary &#39;org.apache.http.legacy&#39;，加上google的推广，Okhttp变得非常火了起来，于是自己也修改自己的网络框架。我使用时OkHttp已经出现3.0的版本了，与2.0的版本还是有一些差别的 get基本上没有什么区别 2.0123456OkHttpClient client = new OkHttpClient();client.setConnectTimeout(15,TimeUnit.SECONDS);client.setWriteTimeout(20,TimeUnit.SECONDS); client.setReadTimeout(20,TimeUnit.SECONDS);Request request = new Request.Builder().url(url).build();Response response = client.newCall(request).execute(); 3.0123456OkHttpClient client = new OkHttpClient();client.newBuilder().connectTitmeout(15,TimeUnit.SECONDS)client.newBuilder().readTimeout(15,TimeUnit.SECONDS)client.newBuilder().wirteTimeout(15,TimeUnit.SECONDS)Request request = new Request.Builder().url(url).build();Response response = client.newCall(request).execute(); post取消了FormEncodingBuilder使用FormBody 2.01234OkHttpClient client = new OkHttpClient();RequestBody requestBody = new FormEncodingBuilder() .add(\"\",\"\").add(\"\",\"\").build();Request request = new Request.Builder().url(url).post(requestBody).build();Response response = client.newCall(request).execute(); 3.01234OkHttpClient client = new OkHttpClient();RequestBody requestBody = new FormBody.Builder().add(\"\",\"\").add(\"\",\"\").build();Request request = new Request.Builder().url(url).post(requestBody).build();Response response = client.newCall(request).execute(); 上传文件MultipartBuilder改为MultipartBody 2.0123456789OkHttpClient client = new OkHttpClient();MultipartBuilder multipartEntity = new MultipartBuilder().type(MultipartBuilder.FORM); File file = new File(tmepName);RequestBody fileBody = RequestBody.create(MediaType.parse(\"image/*\"), file);multipartEntity.addFormDataPart(key,file.getName(), fileBody);multipartEntity.addFormDataPart(key, value);RequestBody requestBody = multipartEntity.build();Request request = new Request.Builder().url(url).post(requestBody).build();Response response = client.newCall(request).execute(); 3.0123456789OkHttpClient client = new OkHttpClient();MultipartBody.Builder multipartEntity = new MultipartBody.Builder();File file = new File(tmepName);RequestBody fileBody = RequestBody.create(MediaType.parse(\"image/*\"), file);multipartEntity.addFormDataPart(key,file.getName(), fileBody);multipartEntity.addFormDataPart(key, value);RequestBody requestBody = multipartEntity.build();Request request = new Request.Builder().url(url).post(requestBody).build();Response response = client.newCall(request).execute(); cookie使用cookieJar替代cookieHandler持久化文件 2.01client.setCookieHandler(new CokieManager(new PersistentCookieStore(context), CookiePolicy.ACCEPT_ALL)); 3.01client.newBuilder().cookieJar(new CookiesManager()); 以上就是OkHttp的简单使用以及2.0与3.0的差异，下一篇我们讲解retrofit。","tags":[]},{"title":"2016年总结","date":"2017-01-04T02:13:01.000Z","path":"2017/01/04/2016年总结/","text":"&#8195;&#8195;时间总是过的飞快，转眼之间2016年已经没剩几天了，想想自己都是26岁的人了，离自己的梦想也渐行渐远。&#8195;&#8195;回顾这一整年，发现自己干的琐事确实蛮多的，但坚持的事总是没有，想想自己都快毕业3年了，还是碌碌无为呀。反而看了许多人写的年终总结，发现自己与他们的差距真的是非常的大，人家一年做了好多好多的实事，而我一年都不知道干了什么。&#8195;&#8195;说实话我是不喜欢写总结来着，这算是我第一次。想想自己都出来3年了，考研的现在也该毕业了，自己的年龄也是越来越大，精力也不想以前那么充沛了，实在不想再浑浑噩噩的过日子。&#8195;&#8195;废话说了这么多，看看我16年都干了些什么。&#8195;&#8195;想了想实在不知道干么了。。。&#8195;&#8195;3月份当时点窝业务还在，还在维护点窝商城与电视TV，还有就是接了一个外包项目，之后就开始做电子券与供销通的业务。说起来就觉得公司比较坑，app做了一版又一版就是没有投入使用，给我的感觉就是我做的app一个都没上线。之后我就开始投入到万千同性交友网站github的怀抱，写demo。&#8195;&#8195;好了基本上就这些，然后就是学习。&#8195;&#8195;学习drag2，mvp ，rx，okhttp，retrofit等等开元框架，订阅与关注了许多大牛，了解RN、热修复等等相关的知识，写写演示Demo。&#8195;&#8195;到12月份的时候，我终于打算写个人app上线应用商店。我开始基于gank.io写我的个人app，注册了三大平台的账号，前前后后花了大概3周的时间终于上线了，但也仅仅是上线了。&#8195;&#8195;写完我是真发现没做什么实事呢。&#8195;&#8195;2017年真是希望自己有所改变，不管是技术还是人际。","tags":[]},{"title":"Hello World","date":"2016-12-28T06:16:40.000Z","path":"2016/12/28/hello-world/","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","tags":[]}]